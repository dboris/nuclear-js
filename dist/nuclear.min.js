var ki=Object.create;var kn=Object.defineProperty;var Pi=Object.getOwnPropertyDescriptor;var Bi=Object.getOwnPropertyNames;var Wi=Object.getPrototypeOf,Ji=Object.prototype.hasOwnProperty;var Pn=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports);var Vi=(a,s,c,d)=>{if(s&&typeof s=="object"||typeof s=="function")for(let l of Bi(s))!Ji.call(a,l)&&l!==c&&kn(a,l,{get:()=>s[l],enumerable:!(d=Pi(s,l))||d.enumerable});return a};var J=(a,s,c)=>(c=a!=null?ki(Wi(a)):{},Vi(s||!a||!a.__esModule?kn(c,"default",{value:a,enumerable:!0}):c,a));var St=Pn((vr,yr)=>{(function(a,s){typeof vr=="object"&&typeof yr<"u"?yr.exports=s():typeof define=="function"&&define.amd?define(s):a.Immutable=s()})(vr,function(){"use strict";var a=Array.prototype.slice;function s(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function c(t){return S(t)?t:K(t)}s(d,c);function d(t){return g(t)?t:ut(t)}s(l,c);function l(t){return O(t)?t:L(t)}s(v,c);function v(t){return S(t)&&!k(t)?t:_t(t)}function S(t){return!!(t&&t[at])}function g(t){return!!(t&&t[rt])}function O(t){return!!(t&&t[br])}function k(t){return g(t)||O(t)}function U(t){return!!(t&&t[Lt])}c.isIterable=S,c.isKeyed=g,c.isIndexed=O,c.isAssociative=k,c.isOrdered=U,c.Keyed=d,c.Indexed=l,c.Set=v;var at="@@__IMMUTABLE_ITERABLE__@@",rt="@@__IMMUTABLE_KEYED__@@",br="@@__IMMUTABLE_INDEXED__@@",Lt="@@__IMMUTABLE_ORDERED__@@",jt="delete",R=5,nt=1<<R,V=nt-1,z={},ci={value:!1},Fr={value:!1};function be(t){return t.value=!1,t}function it(t){t&&(t.value=!0)}function Fe(){}function Et(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),i=0;i<r;i++)n[i]=t[i+e];return n}function Le(t){return t.size===void 0&&(t.size=t.__iterate(Lr)),t.size}function zt(t,e){if(typeof e!="number"){var r=e>>>0;if(""+r!==e||r===4294967295)return NaN;e=r}return e<0?Le(t)+e:e}function Lr(){return!0}function Yt(t,e,r){return(t===0||r!==void 0&&t<=-r)&&(e===void 0||r!==void 0&&e>=r)}function Nt(t,e){return Nr(t,e,0)}function Gt(t,e){return Nr(t,e,e)}function Nr(t,e,r){return t===void 0?r:t<0?Math.max(0,e+t):e===void 0?t:Math.min(e,t)}var Ht=0,ot=1,pt=2,Ne=typeof Symbol=="function"&&Symbol.iterator,Cr="@@iterator",Ce=Ne||Cr;function q(t){this.next=t}q.prototype.toString=function(){return"[Iterator]"},q.KEYS=Ht,q.VALUES=ot,q.ENTRIES=pt,q.prototype.inspect=q.prototype.toSource=function(){return this.toString()},q.prototype[Ce]=function(){return this};function A(t,e,r,n){var i=t===0?e:t===1?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function Y(){return{value:void 0,done:!0}}function xr(t){return!!Ur(t)}function he(t){return t&&typeof t.next=="function"}function Xt(t){var e=Ur(t);return e&&e.call(t)}function Ur(t){var e=t&&(Ne&&t[Ne]||t[Cr]);if(typeof e=="function")return e}function Kr(t){return t&&typeof t.length=="number"}s(K,c);function K(t){return t==null?pe():S(t)?t.toSeq():hi(t)}K.of=function(){return K(arguments)},K.prototype.toSeq=function(){return this},K.prototype.toString=function(){return this.__toString("Seq {","}")},K.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},K.prototype.__iterate=function(t,e){return Jr(this,t,e,!0)},K.prototype.__iterator=function(t,e){return Vr(this,t,e,!0)},s(ut,K);function ut(t){return t==null?pe().toKeyedSeq():S(t)?g(t)?t.toSeq():t.fromEntrySeq():Br(t)}ut.prototype.toKeyedSeq=function(){return this},s(L,K);function L(t){return t==null?pe():S(t)?g(t)?t.entrySeq():t.toIndexedSeq():Ue(t)}L.of=function(){return L(arguments)},L.prototype.toIndexedSeq=function(){return this},L.prototype.toString=function(){return this.__toString("Seq [","]")},L.prototype.__iterate=function(t,e){return Jr(this,t,e,!1)},L.prototype.__iterator=function(t,e){return Vr(this,t,e,!1)},s(_t,K);function _t(t){return(t==null?pe():S(t)?g(t)?t.entrySeq():t:Ue(t)).toSetSeq()}_t.of=function(){return _t(arguments)},_t.prototype.toSetSeq=function(){return this},K.isSeq=xe,K.Keyed=ut,K.Set=_t,K.Indexed=L;var kr="@@__IMMUTABLE_SEQ__@@";K.prototype[kr]=!0,s(lt,L);function lt(t){this._array=t,this.size=t.length}lt.prototype.get=function(t,e){return this.has(t)?this._array[zt(this,t)]:e},lt.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length-1,i=0;i<=n;i++)if(t(r[e?n-i:i],i,this)===!1)return i+1;return i},lt.prototype.__iterator=function(t,e){var r=this._array,n=r.length-1,i=0;return new q(function(){return i>n?Y():A(t,i,r[e?n-i++:i++])})},s(Mt,ut);function Mt(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}Mt.prototype.get=function(t,e){return e!==void 0&&!this.has(t)?e:this._object[t]},Mt.prototype.has=function(t){return this._object.hasOwnProperty(t)},Mt.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,i=n.length-1,o=0;o<=i;o++){var u=n[e?i-o:o];if(t(r[u],u,this)===!1)return o+1}return o},Mt.prototype.__iterator=function(t,e){var r=this._object,n=this._keys,i=n.length-1,o=0;return new q(function(){var u=n[e?i-o:o];return o++>i?Y():A(t,u,r[u])})},Mt.prototype[Lt]=!0,s(Zt,L);function Zt(t){this._iterable=t,this.size=t.length||t.size}Zt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=this._iterable,n=Xt(r),i=0;if(he(n))for(var o;!(o=n.next()).done&&t(o.value,i++,this)!==!1;);return i},Zt.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterable,n=Xt(r);if(!he(n))return new q(Y);var i=0;return new q(function(){var o=n.next();return o.done?o:A(t,i++,o.value)})},s(Qt,L);function Qt(t){this._iterator=t,this._iteratorCache=[]}Qt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var r=this._iterator,n=this._iteratorCache,i=0;i<n.length;)if(t(n[i],i++,this)===!1)return i;for(var o;!(o=r.next()).done;){var u=o.value;if(n[i]=u,t(u,i++,this)===!1)break}return i},Qt.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterator,n=this._iteratorCache,i=0;return new q(function(){if(i>=n.length){var o=r.next();if(o.done)return o;n[i]=o.value}return A(t,i,n[i++])})};function xe(t){return!!(t&&t[kr])}var Pr;function pe(){return Pr||(Pr=new lt([]))}function Br(t){var e=Array.isArray(t)?new lt(t).fromEntrySeq():he(t)?new Qt(t).fromEntrySeq():xr(t)?new Zt(t).fromEntrySeq():typeof t=="object"?new Mt(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function Ue(t){var e=Wr(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function hi(t){var e=Wr(t)||typeof t=="object"&&new Mt(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function Wr(t){return Kr(t)?new lt(t):he(t)?new Qt(t):xr(t)?new Zt(t):void 0}function Jr(t,e,r,n){var i=t._cache;if(i){for(var o=i.length-1,u=0;u<=o;u++){var f=i[r?o-u:u];if(e(f[1],n?f[0]:u,t)===!1)return u+1}return u}return t.__iterateUncached(e,r)}function Vr(t,e,r,n){var i=t._cache;if(i){var o=i.length-1,u=0;return new q(function(){var f=i[r?o-u:u];return u++>o?Y():A(e,n?f[0]:u-1,f[1])})}return t.__iteratorUncached(e,r)}function Ke(t,e){return e?ke(e,t,"",{"":t}):Pe(t)}function ke(t,e,r,n){return Array.isArray(e)?t.call(n,r,L(e).map(function(i,o){return ke(t,i,o,e)})):$r(e)?t.call(n,r,ut(e).map(function(i,o){return ke(t,i,o,e)})):e}function Pe(t){return Array.isArray(t)?L(t).map(Pe).toList():$r(t)?ut(t).map(Pe).toMap():t}function $r(t){return t&&(t.constructor===Object||t.constructor===void 0)}function C(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if(typeof t.valueOf=="function"&&typeof e.valueOf=="function"){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(typeof t.equals=="function"&&typeof e.equals=="function"&&t.equals(e))}function Be(t,e){if(t===e)return!0;if(!S(e)||t.size!==void 0&&e.size!==void 0&&t.size!==e.size||t.__hash!==void 0&&e.__hash!==void 0&&t.__hash!==e.__hash||g(t)!==g(e)||O(t)!==O(e)||U(t)!==U(e))return!1;if(t.size===0&&e.size===0)return!0;var r=!k(t);if(U(t)){var n=t.entries();return e.every(function(h,p){var _=n.next().value;return _&&C(_[1],h)&&(r||C(_[0],p))})&&n.next().done}var i=!1;if(t.size===void 0)if(e.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var u=!0,f=e.__iterate(function(h,p){if(r?!t.has(h):i?!C(h,t.get(p,z)):!C(t.get(p,z),h))return u=!1,!1});return u&&t.size===f}s(W,L);function W(t,e){if(!(this instanceof W))return new W(t,e);if(this._value=t,this.size=e===void 0?1/0:Math.max(0,e),this.size===0){if(We)return We;We=this}}W.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},W.prototype.get=function(t,e){return this.has(t)?this._value:e},W.prototype.includes=function(t){return C(this._value,t)},W.prototype.slice=function(t,e){var r=this.size;return Yt(t,e,r)?this:new W(this._value,Gt(e,r)-Nt(t,r))},W.prototype.reverse=function(){return this},W.prototype.indexOf=function(t){return C(this._value,t)?0:-1},W.prototype.lastIndexOf=function(t){return C(this._value,t)?this.size:-1},W.prototype.__iterate=function(t,e){for(var r=0;r<this.size;r++)if(t(this._value,r,this)===!1)return r+1;return r},W.prototype.__iterator=function(t,e){var r=this,n=0;return new q(function(){return n<r.size?A(t,n++,r._value):Y()})},W.prototype.equals=function(t){return t instanceof W?C(this._value,t._value):Be(t)};var We;function _e(t,e){if(!t)throw new Error(e)}s(P,L);function P(t,e,r){if(!(this instanceof P))return new P(t,e,r);if(_e(r!==0,"Cannot step a Range by 0"),t=t||0,e===void 0&&(e=1/0),r=r===void 0?1:Math.abs(r),e<t&&(r=-r),this._start=t,this._end=e,this._step=r,this.size=Math.max(0,Math.ceil((e-t)/r-1)+1),this.size===0){if(Je)return Je;Je=this}}P.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},P.prototype.get=function(t,e){return this.has(t)?this._start+zt(this,t)*this._step:e},P.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},P.prototype.slice=function(t,e){return Yt(t,e,this.size)?this:(t=Nt(t,this.size),e=Gt(e,this.size),e<=t?new P(0,0):new P(this.get(t,this._end),this.get(e,this._end),this._step))},P.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step===0){var r=e/this._step;if(r>=0&&r<this.size)return r}return-1},P.prototype.lastIndexOf=function(t){return this.indexOf(t)},P.prototype.__iterate=function(t,e){for(var r=this.size-1,n=this._step,i=e?this._start+r*n:this._start,o=0;o<=r;o++){if(t(i,o,this)===!1)return o+1;i+=e?-n:n}return o},P.prototype.__iterator=function(t,e){var r=this.size-1,n=this._step,i=e?this._start+r*n:this._start,o=0;return new q(function(){var u=i;return i+=e?-n:n,o>r?Y():A(t,o++,u)})},P.prototype.equals=function(t){return t instanceof P?this._start===t._start&&this._end===t._end&&this._step===t._step:Be(this,t)};var Je;s(Ot,c);function Ot(){throw TypeError("Abstract")}s(te,Ot);function te(){}s(Ct,Ot);function Ct(){}s(le,Ot);function le(){}Ot.Keyed=te,Ot.Indexed=Ct,Ot.Set=le;var ee=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(e,r){e=e|0,r=r|0;var n=e&65535,i=r&65535;return n*i+((e>>>16)*i+n*(r>>>16)<<16>>>0)|0};function Ve(t){return t>>>1&1073741824|t&3221225471}function Z(t){if(t===!1||t===null||t===void 0||typeof t.valueOf=="function"&&(t=t.valueOf(),t===!1||t===null||t===void 0))return 0;if(t===!0)return 1;var e=typeof t;if(e==="number"){if(t!==t||t===1/0)return 0;var r=t|0;for(r!==t&&(r^=t*4294967295);t>4294967295;)t/=4294967295,r^=t;return Ve(r)}if(e==="string")return t.length>di?pi(t):$e(t);if(typeof t.hashCode=="function")return t.hashCode();if(e==="object")return _i(t);if(typeof t.toString=="function")return $e(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function pi(t){var e=Xe[t];return e===void 0&&(e=$e(t),He===vi&&(He=0,Xe={}),He++,Xe[t]=e),e}function $e(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return Ve(e)}function _i(t){var e;if(je&&(e=Ye.get(t),e!==void 0)||(e=t[Rt],e!==void 0)||!Yr&&(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Rt],e!==void 0||(e=li(t),e!==void 0)))return e;if(e=++Ge,Ge&1073741824&&(Ge=0),je)Ye.set(t,e);else{if(jr!==void 0&&jr(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Yr)Object.defineProperty(t,Rt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Rt]=e;else if(t.nodeType!==void 0)t[Rt]=e;else throw new Error("Unable to set a non-enumerable property on object.")}return e}var jr=Object.isExtensible,Yr=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function li(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}var je=typeof WeakMap=="function",Ye;je&&(Ye=new WeakMap);var Ge=0,Rt="__immutablehash__";typeof Symbol=="function"&&(Rt=Symbol(Rt));var di=16,vi=255,He=0,Xe={};function Q(t){_e(t!==1/0,"Cannot perform this action with an infinite size.")}s(M,te);function M(t){return t==null?ft():Ze(t)&&!U(t)?t:ft().withMutations(function(e){var r=d(t);Q(r.size),r.forEach(function(n,i){return e.set(i,n)})})}M.of=function(){var t=a.call(arguments,0);return ft().withMutations(function(e){for(var r=0;r<t.length;r+=2){if(r+1>=t.length)throw new Error("Missing value for key: "+t[r]);e.set(t[r],t[r+1])}})},M.prototype.toString=function(){return this.__toString("Map {","}")},M.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},M.prototype.set=function(t,e){return Zr(this,t,e)},M.prototype.setIn=function(t,e){return this.updateIn(t,z,function(){return e})},M.prototype.remove=function(t){return Zr(this,t,z)},M.prototype.deleteIn=function(t){return this.updateIn(t,function(){return z})},M.prototype.update=function(t,e,r){return arguments.length===1?t(this):this.updateIn([t],e,r)},M.prototype.updateIn=function(t,e,r){r||(r=e,e=void 0);var n=nn(this,Mn(t),e,r);return n===z?void 0:n},M.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):ft()},M.prototype.merge=function(){return de(this,void 0,arguments)},M.prototype.mergeWith=function(t){var e=a.call(arguments,1);return de(this,t,e)},M.prototype.mergeIn=function(t){var e=a.call(arguments,1);return this.updateIn(t,ft(),function(r){return typeof r.merge=="function"?r.merge.apply(r,e):e[e.length-1]})},M.prototype.mergeDeep=function(){return de(this,tn,arguments)},M.prototype.mergeDeepWith=function(t){var e=a.call(arguments,1);return de(this,en(t),e)},M.prototype.mergeDeepIn=function(t){var e=a.call(arguments,1);return this.updateIn(t,ft(),function(r){return typeof r.mergeDeep=="function"?r.mergeDeep.apply(r,e):e[e.length-1]})},M.prototype.sort=function(t){return N(Wt(this,t))},M.prototype.sortBy=function(t,e){return N(Wt(this,e,t))},M.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},M.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new Fe)},M.prototype.asImmutable=function(){return this.__ensureOwner()},M.prototype.wasAltered=function(){return this.__altered},M.prototype.__iterator=function(t,e){return new Qe(this,t,e)},M.prototype.__iterate=function(t,e){var r=this,n=0;return this._root&&this._root.iterate(function(i){return n++,t(i[1],i[0],r)},e),n},M.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?er(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)};function Ze(t){return!!(t&&t[Gr])}M.isMap=Ze;var Gr="@@__IMMUTABLE_MAP__@@",E=M.prototype;E[Gr]=!0,E[jt]=E.remove,E.removeIn=E.deleteIn;function re(t,e){this.ownerID=t,this.entries=e}re.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,u=i.length;o<u;o++)if(C(r,i[o][0]))return i[o][1];return n},re.prototype.update=function(t,e,r,n,i,o,u){for(var f=i===z,h=this.entries,p=0,_=h.length;p<_&&!C(n,h[p][0]);p++);var y=p<_;if(y?h[p][1]===i:f)return this;if(it(u),(f||!y)&&it(o),!(f&&h.length===1)){if(!y&&!f&&h.length>=Ii)return yi(t,h,n,i);var m=t&&t===this.ownerID,w=m?h:Et(h);return y?f?p===_-1?w.pop():w[p]=w.pop():w[p]=[n,i]:w.push([n,i]),m?(this.entries=w,this):new re(t,w)}};function xt(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r}xt.prototype.get=function(t,e,r,n){e===void 0&&(e=Z(r));var i=1<<((t===0?e:e>>>t)&V),o=this.bitmap;return o&i?this.nodes[on(o&i-1)].get(t+R,e,r,n):n},xt.prototype.update=function(t,e,r,n,i,o,u){r===void 0&&(r=Z(n));var f=(e===0?r:r>>>e)&V,h=1<<f,p=this.bitmap,_=(p&h)!==0;if(!_&&i===z)return this;var y=on(p&h-1),m=this.nodes,w=_?m[y]:void 0,I=rr(w,t,e+R,r,n,i,o,u);if(I===w)return this;if(!_&&I&&m.length>=Ei)return Si(t,m,p,f,I);if(_&&!I&&m.length===2&&Qr(m[y^1]))return m[y^1];if(_&&I&&m.length===1&&Qr(I))return I;var F=t&&t===this.ownerID,ct=_?I?p:p^h:p|h,mt=_?I?un(m,y,I,F):wi(m,y,F):gi(m,y,I,F);return F?(this.bitmap=ct,this.nodes=mt,this):new xt(t,ct,mt)};function ne(t,e,r){this.ownerID=t,this.count=e,this.nodes=r}ne.prototype.get=function(t,e,r,n){e===void 0&&(e=Z(r));var i=(t===0?e:e>>>t)&V,o=this.nodes[i];return o?o.get(t+R,e,r,n):n},ne.prototype.update=function(t,e,r,n,i,o,u){r===void 0&&(r=Z(n));var f=(e===0?r:r>>>e)&V,h=i===z,p=this.nodes,_=p[f];if(h&&!_)return this;var y=rr(_,t,e+R,r,n,i,o,u);if(y===_)return this;var m=this.count;if(!_)m++;else if(!y&&(m--,m<zi))return mi(t,p,m,f);var w=t&&t===this.ownerID,I=un(p,f,y,w);return w?(this.count=m,this.nodes=I,this):new ne(t,m,I)};function Ut(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r}Ut.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,u=i.length;o<u;o++)if(C(r,i[o][0]))return i[o][1];return n},Ut.prototype.update=function(t,e,r,n,i,o,u){r===void 0&&(r=Z(n));var f=i===z;if(r!==this.keyHash)return f?this:(it(u),it(o),nr(this,t,e,r,[n,i]));for(var h=this.entries,p=0,_=h.length;p<_&&!C(n,h[p][0]);p++);var y=p<_;if(y?h[p][1]===i:f)return this;if(it(u),(f||!y)&&it(o),f&&_===2)return new gt(t,this.keyHash,h[p^1]);var m=t&&t===this.ownerID,w=m?h:Et(h);return y?f?p===_-1?w.pop():w[p]=w.pop():w[p]=[n,i]:w.push([n,i]),m?(this.entries=w,this):new Ut(t,this.keyHash,w)};function gt(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r}gt.prototype.get=function(t,e,r,n){return C(r,this.entry[0])?this.entry[1]:n},gt.prototype.update=function(t,e,r,n,i,o,u){var f=i===z,h=C(n,this.entry[0]);if(h?i===this.entry[1]:f)return this;if(it(u),f){it(o);return}return h?t&&t===this.ownerID?(this.entry[1]=i,this):new gt(t,this.keyHash,[n,i]):(it(o),nr(this,t,e,Z(n),[n,i]))},re.prototype.iterate=Ut.prototype.iterate=function(t,e){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(t(r[e?i-n:n])===!1)return!1},xt.prototype.iterate=ne.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var o=r[e?i-n:n];if(o&&o.iterate(t,e)===!1)return!1}},gt.prototype.iterate=function(t,e){return t(this.entry)},s(Qe,q);function Qe(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&Hr(t._root)}Qe.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r=e.node,n=e.index++,i;if(r.entry){if(n===0)return tr(t,r.entry)}else if(r.entries){if(i=r.entries.length-1,n<=i)return tr(t,r.entries[this._reverse?i-n:n])}else if(i=r.nodes.length-1,n<=i){var o=r.nodes[this._reverse?i-n:n];if(o){if(o.entry)return tr(t,o.entry);e=this._stack=Hr(o,e)}continue}e=this._stack=this._stack.__prev}return Y()};function tr(t,e){return A(t,e[0],e[1])}function Hr(t,e){return{node:t,index:0,__prev:e}}function er(t,e,r,n){var i=Object.create(E);return i.size=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}var Xr;function ft(){return Xr||(Xr=er(0))}function Zr(t,e,r){var n,i;if(t._root){var o=be(ci),u=be(Fr);if(n=rr(t._root,t.__ownerID,0,void 0,e,r,o,u),!u.value)return t;i=t.size+(o.value?r===z?-1:1:0)}else{if(r===z)return t;i=1,n=new re(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=i,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?er(i,n):ft()}function rr(t,e,r,n,i,o,u,f){return t?t.update(e,r,n,i,o,u,f):o===z?t:(it(f),it(u),new gt(e,n,[i,o]))}function Qr(t){return t.constructor===gt||t.constructor===Ut}function nr(t,e,r,n,i){if(t.keyHash===n)return new Ut(e,n,[t.entry,i]);var o=(r===0?t.keyHash:t.keyHash>>>r)&V,u=(r===0?n:n>>>r)&V,f,h=o===u?[nr(t,e,r+R,n,i)]:(f=new gt(e,n,i),o<u?[t,f]:[f,t]);return new xt(e,1<<o|1<<u,h)}function yi(t,e,r,n){t||(t=new Fe);for(var i=new gt(t,Z(r),[r,n]),o=0;o<e.length;o++){var u=e[o];i=i.update(t,0,void 0,u[0],u[1])}return i}function mi(t,e,r,n){for(var i=0,o=0,u=new Array(r),f=0,h=1,p=e.length;f<p;f++,h<<=1){var _=e[f];_!==void 0&&f!==n&&(i|=h,u[o++]=_)}return new xt(t,i,u)}function Si(t,e,r,n,i){for(var o=0,u=new Array(nt),f=0;r!==0;f++,r>>>=1)u[f]=r&1?e[o++]:void 0;return u[n]=i,new ne(t,o+1,u)}function de(t,e,r){for(var n=[],i=0;i<r.length;i++){var o=r[i],u=d(o);S(o)||(u=u.map(function(f){return Ke(f)})),n.push(u)}return rn(t,e,n)}function tn(t,e,r){return t&&t.mergeDeep&&S(e)?t.mergeDeep(e):C(t,e)?t:e}function en(t){return function(e,r,n){if(e&&e.mergeDeepWith&&S(r))return e.mergeDeepWith(t,r);var i=t(e,r,n);return C(e,i)?e:i}}function rn(t,e,r){return r=r.filter(function(n){return n.size!==0}),r.length===0?t:t.size===0&&!t.__ownerID&&r.length===1?t.constructor(r[0]):t.withMutations(function(n){for(var i=e?function(u,f){n.update(f,z,function(h){return h===z?u:e(h,u,f)})}:function(u,f){n.set(f,u)},o=0;o<r.length;o++)r[o].forEach(i)})}function nn(t,e,r,n){var i=t===z,o=e.next();if(o.done){var u=i?r:t,f=n(u);return f===u?t:f}_e(i||t&&t.set,"invalid keyPath");var h=o.value,p=i?z:t.get(h,z),_=nn(p,e,r,n);return _===p?t:_===z?t.remove(h):(i?ft():t).set(h,_)}function on(t){return t=t-(t>>1&1431655765),t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t=t+(t>>8),t=t+(t>>16),t&127}function un(t,e,r,n){var i=n?t:Et(t);return i[e]=r,i}function gi(t,e,r,n){var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var o=new Array(i),u=0,f=0;f<i;f++)f===e?(o[f]=r,u=-1):o[f]=t[f+u];return o}function wi(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=new Array(n),o=0,u=0;u<n;u++)u===e&&(o=1),i[u]=t[u+o];return i}var Ii=nt/4,Ei=nt/2,zi=nt/4;s(T,Ct);function T(t){var e=ir();if(t==null)return e;if(sn(t))return t;var r=l(t),n=r.size;return n===0?e:(Q(n),n>0&&n<nt?oe(0,n,R,null,new qt(r.toArray())):e.withMutations(function(i){i.setSize(n),r.forEach(function(o,u){return i.set(u,o)})}))}T.of=function(){return this(arguments)},T.prototype.toString=function(){return this.__toString("List [","]")},T.prototype.get=function(t,e){if(t=zt(this,t),t>=0&&t<this.size){t+=this._origin;var r=hn(this,t);return r&&r.array[t&V]}return e},T.prototype.set=function(t,e){return Mi(this,t,e)},T.prototype.remove=function(t){return this.has(t)?t===0?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},T.prototype.insert=function(t,e){return this.splice(t,0,e)},T.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=R,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):ir()},T.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(r){Dt(r,0,e+t.length);for(var n=0;n<t.length;n++)r.set(e+n,t[n])})},T.prototype.pop=function(){return Dt(this,0,-1)},T.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Dt(e,-t.length);for(var r=0;r<t.length;r++)e.set(r,t[r])})},T.prototype.shift=function(){return Dt(this,1)},T.prototype.merge=function(){return ve(this,void 0,arguments)},T.prototype.mergeWith=function(t){var e=a.call(arguments,1);return ve(this,t,e)},T.prototype.mergeDeep=function(){return ve(this,tn,arguments)},T.prototype.mergeDeepWith=function(t){var e=a.call(arguments,1);return ve(this,en(t),e)},T.prototype.setSize=function(t){return Dt(this,0,t)},T.prototype.slice=function(t,e){var r=this.size;return Yt(t,e,r)?this:Dt(this,Nt(t,r),Gt(e,r))},T.prototype.__iterator=function(t,e){var r=0,n=fn(this,e);return new q(function(){var i=n();return i===ie?Y():A(t,r++,i)})},T.prototype.__iterate=function(t,e){for(var r=0,n=fn(this,e),i;(i=n())!==ie&&t(i,r++,this)!==!1;);return r},T.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?oe(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)};function sn(t){return!!(t&&t[an])}T.isList=sn;var an="@@__IMMUTABLE_LIST__@@",$=T.prototype;$[an]=!0,$[jt]=$.remove,$.setIn=E.setIn,$.deleteIn=$.removeIn=E.removeIn,$.update=E.update,$.updateIn=E.updateIn,$.mergeIn=E.mergeIn,$.mergeDeepIn=E.mergeDeepIn,$.withMutations=E.withMutations,$.asMutable=E.asMutable,$.asImmutable=E.asImmutable,$.wasAltered=E.wasAltered;function qt(t,e){this.array=t,this.ownerID=e}qt.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:this.array.length===0)return this;var n=r>>>e&V;if(n>=this.array.length)return new qt([],t);var i=n===0,o;if(e>0){var u=this.array[n];if(o=u&&u.removeBefore(t,e-R,r),o===u&&i)return this}if(i&&!o)return this;var f=Kt(this,t);if(!i)for(var h=0;h<n;h++)f.array[h]=void 0;return o&&(f.array[n]=o),f},qt.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||this.array.length===0)return this;var n=r-1>>>e&V;if(n>=this.array.length)return this;var i;if(e>0){var o=this.array[n];if(i=o&&o.removeAfter(t,e-R,r),i===o&&n===this.array.length-1)return this}var u=Kt(this,t);return u.array.splice(n+1),i&&(u.array[n]=i),u};var ie={};function fn(t,e){var r=t._origin,n=t._capacity,i=ue(n),o=t._tail;return u(t._root,t._level,0);function u(p,_,y){return _===0?f(p,y):h(p,_,y)}function f(p,_){var y=_===i?o&&o.array:p&&p.array,m=_>r?0:r-_,w=n-_;return w>nt&&(w=nt),function(){if(m===w)return ie;var I=e?--w:m++;return y&&y[I]}}function h(p,_,y){var m,w=p&&p.array,I=y>r?0:r-y>>_,F=(n-y>>_)+1;return F>nt&&(F=nt),function(){do{if(m){var ct=m();if(ct!==ie)return ct;m=null}if(I===F)return ie;var mt=e?--F:I++;m=u(w&&w[mt],_-R,y+(mt<<_))}while(!0)}}}function oe(t,e,r,n,i,o,u){var f=Object.create($);return f.size=e-t,f._origin=t,f._capacity=e,f._level=r,f._root=n,f._tail=i,f.__ownerID=o,f.__hash=u,f.__altered=!1,f}var cn;function ir(){return cn||(cn=oe(0,0,R))}function Mi(t,e,r){if(e=zt(t,e),e!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(u){e<0?Dt(u,e).set(0,r):Dt(u,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,i=t._root,o=be(Fr);return e>=ue(t._capacity)?n=or(n,t.__ownerID,0,e,r,o):i=or(i,t.__ownerID,t._level,e,r,o),o.value?t.__ownerID?(t._root=i,t._tail=n,t.__hash=void 0,t.__altered=!0,t):oe(t._origin,t._capacity,t._level,i,n):t}function or(t,e,r,n,i,o){var u=n>>>r&V,f=t&&u<t.array.length;if(!f&&i===void 0)return t;var h;if(r>0){var p=t&&t.array[u],_=or(p,e,r-R,n,i,o);return _===p?t:(h=Kt(t,e),h.array[u]=_,h)}return f&&t.array[u]===i?t:(it(o),h=Kt(t,e),i===void 0&&u===h.array.length-1?h.array.pop():h.array[u]=i,h)}function Kt(t,e){return e&&t&&e===t.ownerID?t:new qt(t?t.array.slice():[],e)}function hn(t,e){if(e>=ue(t._capacity))return t._tail;if(e<1<<t._level+R){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&V],n-=R;return r}}function Dt(t,e,r){e!==void 0&&(e=e|0),r!==void 0&&(r=r|0);var n=t.__ownerID||new Fe,i=t._origin,o=t._capacity,u=i+e,f=r===void 0?o:r<0?o+r:i+r;if(u===i&&f===o)return t;if(u>=f)return t.clear();for(var h=t._level,p=t._root,_=0;u+_<0;)p=new qt(p&&p.array.length?[void 0,p]:[],n),h+=R,_+=1<<h;_&&(u+=_,i+=_,f+=_,o+=_);for(var y=ue(o),m=ue(f);m>=1<<h+R;)p=new qt(p&&p.array.length?[p]:[],n),h+=R;var w=t._tail,I=m<y?hn(t,f-1):m>y?new qt([],n):w;if(w&&m>y&&u<o&&w.array.length){p=Kt(p,n);for(var F=p,ct=h;ct>R;ct-=R){var mt=y>>>ct&V;F=F.array[mt]=Kt(F.array[mt],n)}F.array[y>>>R&V]=w}if(f<o&&(I=I&&I.removeAfter(n,0,f)),u>=m)u-=m,f-=m,h=R,p=null,I=I&&I.removeBefore(n,0,u);else if(u>i||m<y){for(_=0;p;){var Ee=u>>>h&V;if(Ee!==m>>>h&V)break;Ee&&(_+=(1<<h)*Ee),h-=R,p=p.array[Ee]}p&&u>i&&(p=p.removeBefore(n,h,u-_)),p&&m<y&&(p=p.removeAfter(n,h,m-_)),_&&(u-=_,f-=_)}return t.__ownerID?(t.size=f-u,t._origin=u,t._capacity=f,t._level=h,t._root=p,t._tail=I,t.__hash=void 0,t.__altered=!0,t):oe(u,f,h,p,I)}function ve(t,e,r){for(var n=[],i=0,o=0;o<r.length;o++){var u=r[o],f=l(u);f.size>i&&(i=f.size),S(u)||(f=f.map(function(h){return Ke(h)})),n.push(f)}return i>t.size&&(t=t.setSize(i)),rn(t,e,n)}function ue(t){return t<nt?0:t-1>>>R<<R}s(N,M);function N(t){return t==null?ye():pn(t)?t:ye().withMutations(function(e){var r=d(t);Q(r.size),r.forEach(function(n,i){return e.set(i,n)})})}N.of=function(){return this(arguments)},N.prototype.toString=function(){return this.__toString("OrderedMap {","}")},N.prototype.get=function(t,e){var r=this._map.get(t);return r!==void 0?this._list.get(r)[1]:e},N.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ye()},N.prototype.set=function(t,e){return ln(this,t,e)},N.prototype.remove=function(t){return ln(this,t,z)},N.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},N.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate(function(n){return n&&t(n[1],n[0],r)},e)},N.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},N.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?ur(e,r,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=r,this)};function pn(t){return Ze(t)&&U(t)}N.isOrderedMap=pn,N.prototype[Lt]=!0,N.prototype[jt]=N.prototype.remove;function ur(t,e,r,n){var i=Object.create(N.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=r,i.__hash=n,i}var _n;function ye(){return _n||(_n=ur(ft(),ir()))}function ln(t,e,r){var n=t._map,i=t._list,o=n.get(e),u=o!==void 0,f,h;if(r===z){if(!u)return t;i.size>=nt&&i.size>=n.size*2?(h=i.filter(function(p,_){return p!==void 0&&o!==_}),f=h.toKeyedSeq().map(function(p){return p[0]}).flip().toMap(),t.__ownerID&&(f.__ownerID=h.__ownerID=t.__ownerID)):(f=n.remove(e),h=o===i.size-1?i.pop():i.set(o,void 0))}else if(u){if(r===i.get(o)[1])return t;f=n,h=i.set(o,[e,r])}else f=n.set(e,i.size),h=i.set(i.size,[e,r]);return t.__ownerID?(t.size=f.size,t._map=f,t._list=h,t.__hash=void 0,t):ur(f,h)}s(st,ut);function st(t,e){this._iter=t,this._useKeys=e,this.size=t.size}st.prototype.get=function(t,e){return this._iter.get(t,e)},st.prototype.has=function(t){return this._iter.has(t)},st.prototype.valueSeq=function(){return this._iter.valueSeq()},st.prototype.reverse=function(){var t=this,e=sr(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},st.prototype.map=function(t,e){var r=this,n=vn(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},st.prototype.__iterate=function(t,e){var r=this,n;return this._iter.__iterate(this._useKeys?function(i,o){return t(i,o,r)}:(n=e?In(this):0,function(i){return t(i,e?--n:n++,r)}),e)},st.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var r=this._iter.__iterator(ot,e),n=e?In(this):0;return new q(function(){var i=r.next();return i.done?i:A(t,e?--n:n++,i.value,i)})},st.prototype[Lt]=!0,s(kt,L);function kt(t){this._iter=t,this.size=t.size}kt.prototype.includes=function(t){return this._iter.includes(t)},kt.prototype.__iterate=function(t,e){var r=this,n=0;return this._iter.__iterate(function(i){return t(i,n++,r)},e)},kt.prototype.__iterator=function(t,e){var r=this._iter.__iterator(ot,e),n=0;return new q(function(){var i=r.next();return i.done?i:A(t,n++,i.value,i)})},s(Pt,_t);function Pt(t){this._iter=t,this.size=t.size}Pt.prototype.has=function(t){return this._iter.includes(t)},Pt.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate(function(n){return t(n,n,r)},e)},Pt.prototype.__iterator=function(t,e){var r=this._iter.__iterator(ot,e);return new q(function(){var n=r.next();return n.done?n:A(t,n.value,n.value,n)})},s(Bt,ut);function Bt(t){this._iter=t,this.size=t.size}Bt.prototype.entrySeq=function(){return this._iter.toSeq()},Bt.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate(function(n){if(n){wn(n);var i=S(n);return t(i?n.get(1):n[1],i?n.get(0):n[0],r)}},e)},Bt.prototype.__iterator=function(t,e){var r=this._iter.__iterator(ot,e);return new q(function(){for(;;){var n=r.next();if(n.done)return n;var i=n.value;if(i){wn(i);var o=S(i);return A(t,o?i.get(0):i[0],o?i.get(1):i[1],n)}}})},kt.prototype.cacheResult=st.prototype.cacheResult=Pt.prototype.cacheResult=Bt.prototype.cacheResult=cr;function dn(t){var e=dt(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var r=t.reverse.apply(this);return r.flip=function(){return t.reverse()},r},e.has=function(r){return t.includes(r)},e.includes=function(r){return t.has(r)},e.cacheResult=cr,e.__iterateUncached=function(r,n){var i=this;return t.__iterate(function(o,u){return r(u,o,i)!==!1},n)},e.__iteratorUncached=function(r,n){if(r===pt){var i=t.__iterator(r,n);return new q(function(){var o=i.next();if(!o.done){var u=o.value[0];o.value[0]=o.value[1],o.value[1]=u}return o})}return t.__iterator(r===ot?Ht:ot,n)},e}function vn(t,e,r){var n=dt(t);return n.size=t.size,n.has=function(i){return t.has(i)},n.get=function(i,o){var u=t.get(i,z);return u===z?o:e.call(r,u,i,t)},n.__iterateUncached=function(i,o){var u=this;return t.__iterate(function(f,h,p){return i(e.call(r,f,h,p),h,u)!==!1},o)},n.__iteratorUncached=function(i,o){var u=t.__iterator(pt,o);return new q(function(){var f=u.next();if(f.done)return f;var h=f.value,p=h[0];return A(i,p,e.call(r,h[1],p,t),f)})},n}function sr(t,e){var r=dt(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var n=dn(t);return n.reverse=function(){return t.flip()},n}),r.get=function(n,i){return t.get(e?n:-1-n,i)},r.has=function(n){return t.has(e?n:-1-n)},r.includes=function(n){return t.includes(n)},r.cacheResult=cr,r.__iterate=function(n,i){var o=this;return t.__iterate(function(u,f){return n(u,f,o)},!i)},r.__iterator=function(n,i){return t.__iterator(n,!i)},r}function yn(t,e,r,n){var i=dt(t);return n&&(i.has=function(o){var u=t.get(o,z);return u!==z&&!!e.call(r,u,o,t)},i.get=function(o,u){var f=t.get(o,z);return f!==z&&e.call(r,f,o,t)?f:u}),i.__iterateUncached=function(o,u){var f=this,h=0;return t.__iterate(function(p,_,y){if(e.call(r,p,_,y))return h++,o(p,n?_:h-1,f)},u),h},i.__iteratorUncached=function(o,u){var f=t.__iterator(pt,u),h=0;return new q(function(){for(;;){var p=f.next();if(p.done)return p;var _=p.value,y=_[0],m=_[1];if(e.call(r,m,y,t))return A(o,n?y:h++,m,p)}})},i}function Oi(t,e,r){var n=M().asMutable();return t.__iterate(function(i,o){n.update(e.call(r,i,o,t),0,function(u){return u+1})}),n.asImmutable()}function qi(t,e,r){var n=g(t),i=(U(t)?N():M()).asMutable();t.__iterate(function(u,f){i.update(e.call(r,u,f,t),function(h){return h=h||[],h.push(n?[f,u]:u),h})});var o=En(t);return i.map(function(u){return D(t,o(u))})}function ar(t,e,r,n){var i=t.size;if(e!==void 0&&(e=e|0),r!==void 0&&(r===1/0?r=i:r=r|0),Yt(e,r,i))return t;var o=Nt(e,i),u=Gt(r,i);if(o!==o||u!==u)return ar(t.toSeq().cacheResult(),e,r,n);var f=u-o,h;f===f&&(h=f<0?0:f);var p=dt(t);return p.size=h===0?h:t.size&&h||void 0,!n&&xe(t)&&h>=0&&(p.get=function(_,y){return _=zt(this,_),_>=0&&_<h?t.get(_+o,y):y}),p.__iterateUncached=function(_,y){var m=this;if(h===0)return 0;if(y)return this.cacheResult().__iterate(_,y);var w=0,I=!0,F=0;return t.__iterate(function(ct,mt){if(!(I&&(I=w++<o)))return F++,_(ct,n?mt:F-1,m)!==!1&&F!==h}),F},p.__iteratorUncached=function(_,y){if(h!==0&&y)return this.cacheResult().__iterator(_,y);var m=h!==0&&t.__iterator(_,y),w=0,I=0;return new q(function(){for(;w++<o;)m.next();if(++I>h)return Y();var F=m.next();return n||_===ot?F:_===Ht?A(_,I-1,void 0,F):A(_,I-1,F.value[1],F)})},p}function Di(t,e,r){var n=dt(t);return n.__iterateUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterate(i,o);var f=0;return t.__iterate(function(h,p,_){return e.call(r,h,p,_)&&++f&&i(h,p,u)}),f},n.__iteratorUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterator(i,o);var f=t.__iterator(pt,o),h=!0;return new q(function(){if(!h)return Y();var p=f.next();if(p.done)return p;var _=p.value,y=_[0],m=_[1];return e.call(r,m,y,u)?i===pt?p:A(i,y,m,p):(h=!1,Y())})},n}function mn(t,e,r,n){var i=dt(t);return i.__iterateUncached=function(o,u){var f=this;if(u)return this.cacheResult().__iterate(o,u);var h=!0,p=0;return t.__iterate(function(_,y,m){if(!(h&&(h=e.call(r,_,y,m))))return p++,o(_,n?y:p-1,f)}),p},i.__iteratorUncached=function(o,u){var f=this;if(u)return this.cacheResult().__iterator(o,u);var h=t.__iterator(pt,u),p=!0,_=0;return new q(function(){var y,m,w;do{if(y=h.next(),y.done)return n||o===ot?y:o===Ht?A(o,_++,void 0,y):A(o,_++,y.value[1],y);var I=y.value;m=I[0],w=I[1],p&&(p=e.call(r,w,m,f))}while(p);return o===pt?y:A(o,m,w,y)})},i}function Ai(t,e){var r=g(t),n=[t].concat(e).map(function(u){return S(u)?r&&(u=d(u)):u=r?Br(u):Ue(Array.isArray(u)?u:[u]),u}).filter(function(u){return u.size!==0});if(n.length===0)return t;if(n.length===1){var i=n[0];if(i===t||r&&g(i)||O(t)&&O(i))return i}var o=new lt(n);return r?o=o.toKeyedSeq():O(t)||(o=o.toSetSeq()),o=o.flatten(!0),o.size=n.reduce(function(u,f){if(u!==void 0){var h=f.size;if(h!==void 0)return u+h}},0),o}function Sn(t,e,r){var n=dt(t);return n.__iterateUncached=function(i,o){var u=0,f=!1;function h(p,_){var y=this;p.__iterate(function(m,w){return(!e||_<e)&&S(m)?h(m,_+1):i(m,r?w:u++,y)===!1&&(f=!0),!f},o)}return h(t,0),u},n.__iteratorUncached=function(i,o){var u=t.__iterator(i,o),f=[],h=0;return new q(function(){for(;u;){var p=u.next();if(p.done!==!1){u=f.pop();continue}var _=p.value;if(i===pt&&(_=_[1]),(!e||f.length<e)&&S(_))f.push(u),u=_.__iterator(i,o);else return r?p:A(i,h++,_,p)}return Y()})},n}function Ri(t,e,r){var n=En(t);return t.toSeq().map(function(i,o){return n(e.call(r,i,o,t))}).flatten(!0)}function Ti(t,e){var r=dt(t);return r.size=t.size&&t.size*2-1,r.__iterateUncached=function(n,i){var o=this,u=0;return t.__iterate(function(f,h){return(!u||n(e,u++,o)!==!1)&&n(f,u++,o)!==!1},i),u},r.__iteratorUncached=function(n,i){var o=t.__iterator(ot,i),u=0,f;return new q(function(){return(!f||u%2)&&(f=o.next(),f.done)?f:u%2?A(n,u++,e):A(n,u++,f.value,f)})},r}function Wt(t,e,r){e||(e=zn);var n=g(t),i=0,o=t.toSeq().map(function(u,f){return[f,u,i++,r?r(u,f,t):u]}).toArray();return o.sort(function(u,f){return e(u[3],f[3])||u[2]-f[2]}).forEach(n?function(u,f){o[f].length=2}:function(u,f){o[f]=u[1]}),n?ut(o):O(t)?L(o):_t(o)}function me(t,e,r){if(e||(e=zn),r){var n=t.toSeq().map(function(i,o){return[i,r(i,o,t)]}).reduce(function(i,o){return gn(e,i[1],o[1])?o:i});return n&&n[0]}else return t.reduce(function(i,o){return gn(e,i,o)?o:i})}function gn(t,e,r){var n=t(r,e);return n===0&&r!==e&&(r==null||r!==r)||n>0}function fr(t,e,r){var n=dt(t);return n.size=new lt(r).map(function(i){return i.size}).min(),n.__iterate=function(i,o){for(var u=this.__iterator(ot,o),f,h=0;!(f=u.next()).done&&i(f.value,h++,this)!==!1;);return h},n.__iteratorUncached=function(i,o){var u=r.map(function(p){return p=c(p),Xt(o?p.reverse():p)}),f=0,h=!1;return new q(function(){var p;return h||(p=u.map(function(_){return _.next()}),h=p.some(function(_){return _.done})),h?Y():A(i,f++,e.apply(null,p.map(function(_){return _.value})))})},n}function D(t,e){return xe(t)?e:t.constructor(e)}function wn(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function In(t){return Q(t.size),Le(t)}function En(t){return g(t)?d:O(t)?l:v}function dt(t){return Object.create((g(t)?ut:O(t)?L:_t).prototype)}function cr(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):K.prototype.cacheResult.call(this)}function zn(t,e){return t>e?1:t<e?-1:0}function Mn(t){var e=Xt(t);if(!e){if(!Kr(t))throw new TypeError("Expected iterable or array-like: "+t);e=Xt(c(t))}return e}s(tt,te);function tt(t,e){var r,n=function(u){if(u instanceof n)return u;if(!(this instanceof n))return new n(u);if(!r){r=!0;var f=Object.keys(t);bi(i,f),i.size=f.length,i._name=e,i._keys=f,i._defaultValues=t}this._map=M(u)},i=n.prototype=Object.create(B);return i.constructor=n,n}tt.prototype.toString=function(){return this.__toString(On(this)+" {","}")},tt.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},tt.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._defaultValues[t];return this._map?this._map.get(t,r):r},tt.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=Se(this,ft()))},tt.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+On(this));if(this._map&&!this._map.has(t)){var r=this._defaultValues[t];if(e===r)return this}var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:Se(this,n)},tt.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:Se(this,e)},tt.prototype.wasAltered=function(){return this._map.wasAltered()},tt.prototype.__iterator=function(t,e){var r=this;return d(this._defaultValues).map(function(n,i){return r.get(i)}).__iterator(t,e)},tt.prototype.__iterate=function(t,e){var r=this;return d(this._defaultValues).map(function(n,i){return r.get(i)}).__iterate(t,e)},tt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?Se(this,e,t):(this.__ownerID=t,this._map=e,this)};var B=tt.prototype;B[jt]=B.remove,B.deleteIn=B.removeIn=E.removeIn,B.merge=E.merge,B.mergeWith=E.mergeWith,B.mergeIn=E.mergeIn,B.mergeDeep=E.mergeDeep,B.mergeDeepWith=E.mergeDeepWith,B.mergeDeepIn=E.mergeDeepIn,B.setIn=E.setIn,B.update=E.update,B.updateIn=E.updateIn,B.withMutations=E.withMutations,B.asMutable=E.asMutable,B.asImmutable=E.asImmutable;function Se(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._map=e,n.__ownerID=r,n}function On(t){return t._name||t.constructor.name||"Record"}function bi(t,e){try{e.forEach(Fi.bind(void 0,t))}catch{}}function Fi(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(r){_e(this.__ownerID,"Cannot set on an immutable record."),this.set(e,r)}})}s(b,le);function b(t){return t==null?_r():hr(t)&&!U(t)?t:_r().withMutations(function(e){var r=v(t);Q(r.size),r.forEach(function(n){return e.add(n)})})}b.of=function(){return this(arguments)},b.fromKeys=function(t){return this(d(t).keySeq())},b.prototype.toString=function(){return this.__toString("Set {","}")},b.prototype.has=function(t){return this._map.has(t)},b.prototype.add=function(t){return pr(this,this._map.set(t,!0))},b.prototype.remove=function(t){return pr(this,this._map.remove(t))},b.prototype.clear=function(){return pr(this,this._map.clear())},b.prototype.union=function(){var t=a.call(arguments,0);return t=t.filter(function(e){return e.size!==0}),t.length===0?this:this.size===0&&!this.__ownerID&&t.length===1?this.constructor(t[0]):this.withMutations(function(e){for(var r=0;r<t.length;r++)v(t[r]).forEach(function(n){return e.add(n)})})},b.prototype.intersect=function(){var t=a.call(arguments,0);if(t.length===0)return this;t=t.map(function(r){return v(r)});var e=this;return this.withMutations(function(r){e.forEach(function(n){t.every(function(i){return i.includes(n)})||r.remove(n)})})},b.prototype.subtract=function(){var t=a.call(arguments,0);if(t.length===0)return this;t=t.map(function(r){return v(r)});var e=this;return this.withMutations(function(r){e.forEach(function(n){t.some(function(i){return i.includes(n)})&&r.remove(n)})})},b.prototype.merge=function(){return this.union.apply(this,arguments)},b.prototype.mergeWith=function(t){var e=a.call(arguments,1);return this.union.apply(this,e)},b.prototype.sort=function(t){return vt(Wt(this,t))},b.prototype.sortBy=function(t,e){return vt(Wt(this,e,t))},b.prototype.wasAltered=function(){return this._map.wasAltered()},b.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate(function(n,i){return t(i,i,r)},e)},b.prototype.__iterator=function(t,e){return this._map.map(function(r,n){return n}).__iterator(t,e)},b.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)};function hr(t){return!!(t&&t[qn])}b.isSet=hr;var qn="@@__IMMUTABLE_SET__@@",et=b.prototype;et[qn]=!0,et[jt]=et.remove,et.mergeDeep=et.merge,et.mergeDeepWith=et.mergeWith,et.withMutations=E.withMutations,et.asMutable=E.asMutable,et.asImmutable=E.asImmutable,et.__empty=_r,et.__make=Dn;function pr(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:e.size===0?t.__empty():t.__make(e)}function Dn(t,e){var r=Object.create(et);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var An;function _r(){return An||(An=Dn(ft()))}s(vt,b);function vt(t){return t==null?lr():Rn(t)?t:lr().withMutations(function(e){var r=v(t);Q(r.size),r.forEach(function(n){return e.add(n)})})}vt.of=function(){return this(arguments)},vt.fromKeys=function(t){return this(d(t).keySeq())},vt.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function Rn(t){return hr(t)&&U(t)}vt.isOrderedSet=Rn;var ge=vt.prototype;ge[Lt]=!0,ge.__empty=lr,ge.__make=Tn;function Tn(t,e){var r=Object.create(ge);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var bn;function lr(){return bn||(bn=Tn(ye()))}s(x,Ct);function x(t){return t==null?dr():Fn(t)?t:dr().unshiftAll(t)}x.of=function(){return this(arguments)},x.prototype.toString=function(){return this.__toString("Stack [","]")},x.prototype.get=function(t,e){var r=this._head;for(t=zt(this,t);r&&t--;)r=r.next;return r?r.value:e},x.prototype.peek=function(){return this._head&&this._head.value},x.prototype.push=function(){if(arguments.length===0)return this;for(var t=this.size+arguments.length,e=this._head,r=arguments.length-1;r>=0;r--)e={value:arguments[r],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):se(t,e)},x.prototype.pushAll=function(t){if(t=l(t),t.size===0)return this;Q(t.size);var e=this.size,r=this._head;return t.reverse().forEach(function(n){e++,r={value:n,next:r}}),this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):se(e,r)},x.prototype.pop=function(){return this.slice(1)},x.prototype.unshift=function(){return this.push.apply(this,arguments)},x.prototype.unshiftAll=function(t){return this.pushAll(t)},x.prototype.shift=function(){return this.pop.apply(this,arguments)},x.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):dr()},x.prototype.slice=function(t,e){if(Yt(t,e,this.size))return this;var r=Nt(t,this.size),n=Gt(e,this.size);if(n!==this.size)return Ct.prototype.slice.call(this,t,e);for(var i=this.size-r,o=this._head;r--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):se(i,o)},x.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?se(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},x.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var r=0,n=this._head;n&&t(n.value,r++,this)!==!1;)n=n.next;return r},x.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var r=0,n=this._head;return new q(function(){if(n){var i=n.value;return n=n.next,A(t,r++,i)}return Y()})};function Fn(t){return!!(t&&t[Ln])}x.isStack=Fn;var Ln="@@__IMMUTABLE_STACK__@@",Jt=x.prototype;Jt[Ln]=!0,Jt.withMutations=E.withMutations,Jt.asMutable=E.asMutable,Jt.asImmutable=E.asImmutable,Jt.wasAltered=E.wasAltered;function se(t,e,r,n){var i=Object.create(Jt);return i.size=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}var Nn;function dr(){return Nn||(Nn=se(0))}function yt(t,e){var r=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}c.Iterator=q,yt(c,{toArray:function(){Q(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,r){t[r]=e}),t},toIndexedSeq:function(){return new kt(this)},toJS:function(){return this.toSeq().map(function(t){return t&&typeof t.toJS=="function"?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&typeof t.toJSON=="function"?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new st(this,!0)},toMap:function(){return M(this.toKeyedSeq())},toObject:function(){Q(this.size);var t={};return this.__iterate(function(e,r){t[r]=e}),t},toOrderedMap:function(){return N(this.toKeyedSeq())},toOrderedSet:function(){return vt(g(this)?this.valueSeq():this)},toSet:function(){return b(g(this)?this.valueSeq():this)},toSetSeq:function(){return new Pt(this)},toSeq:function(){return O(this)?this.toIndexedSeq():g(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return x(g(this)?this.valueSeq():this)},toList:function(){return T(g(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return this.size===0?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var t=a.call(arguments,0);return D(this,Ai(this,t))},includes:function(t){return this.some(function(e){return C(e,t)})},entries:function(){return this.__iterator(pt)},every:function(t,e){Q(this.size);var r=!0;return this.__iterate(function(n,i,o){if(!t.call(e,n,i,o))return r=!1,!1}),r},filter:function(t,e){return D(this,yn(this,t,e,!0))},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return Q(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Q(this.size),t=t!==void 0?""+t:",";var e="",r=!0;return this.__iterate(function(n){r?r=!1:e+=t,e+=n!=null?n.toString():""}),e},keys:function(){return this.__iterator(Ht)},map:function(t,e){return D(this,vn(this,t,e))},reduce:function(t,e,r){Q(this.size);var n,i;return arguments.length<2?i=!0:n=e,this.__iterate(function(o,u,f){i?(i=!1,n=o):n=t.call(r,n,o,u,f)}),n},reduceRight:function(t,e,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return D(this,sr(this,!0))},slice:function(t,e){return D(this,ar(this,t,e,!0))},some:function(t,e){return!this.every(Ie(t),e)},sort:function(t){return D(this,Wt(this,t))},values:function(){return this.__iterator(ot)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(t,e){return Le(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return Oi(this,t,e)},equals:function(t){return Be(this,t)},entrySeq:function(){var t=this;if(t._cache)return new lt(t._cache);var e=t.toSeq().map(Ni).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Ie(t),e)},findEntry:function(t,e,r){var n=r;return this.__iterate(function(i,o,u){if(t.call(e,i,o,u))return n=[o,i],!1}),n},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(Lr)},flatMap:function(t,e){return D(this,Ri(this,t,e))},flatten:function(t){return D(this,Sn(this,t,!0))},fromEntrySeq:function(){return new Bt(this)},get:function(t,e){return this.find(function(r,n){return C(n,t)},void 0,e)},getIn:function(t,e){for(var r=this,n=Mn(t),i;!(i=n.next()).done;){var o=i.value;if(r=r&&r.get?r.get(o,z):z,r===z)return e}return r},groupBy:function(t,e){return qi(this,t,e)},has:function(t){return this.get(t,z)!==z},hasIn:function(t){return this.getIn(t,z)!==z},isSubset:function(t){return t=typeof t.includes=="function"?t:c(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t=typeof t.isSubset=="function"?t:c(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(e){return C(e,t)})},keySeq:function(){return this.toSeq().map(Li).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return me(this,t)},maxBy:function(t,e){return me(this,e,t)},min:function(t){return me(this,t?Cn(t):Un)},minBy:function(t,e){return me(this,e?Cn(e):Un,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return D(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return D(this,mn(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Ie(t),e)},sortBy:function(t,e){return D(this,Wt(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return D(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return D(this,Di(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Ie(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=xi(this))}});var j=c.prototype;j[at]=!0,j[Ce]=j.values,j.__toJS=j.toArray,j.__toStringMapper=xn,j.inspect=j.toSource=function(){return this.toString()},j.chain=j.flatMap,j.contains=j.includes,yt(d,{flip:function(){return D(this,dn(this))},mapEntries:function(t,e){var r=this,n=0;return D(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],n++,r)}).fromEntrySeq())},mapKeys:function(t,e){var r=this;return D(this,this.toSeq().flip().map(function(n,i){return t.call(e,n,i,r)}).flip())}});var we=d.prototype;we[rt]=!0,we[Ce]=j.entries,we.__toJS=j.toObject,we.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+xn(t)},yt(l,{toKeyedSeq:function(){return new st(this,!1)},filter:function(t,e){return D(this,yn(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return e===void 0?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return e===void 0?-1:e},reverse:function(){return D(this,sr(this,!1))},slice:function(t,e){return D(this,ar(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(e|0,0),r===0||r===2&&!e)return this;t=Nt(t,t<0?this.count():this.size);var n=this.slice(0,t);return D(this,r===1?n:n.concat(Et(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(){return this.get(0)},flatten:function(t){return D(this,Sn(this,t,!1))},get:function(t,e){return t=zt(this,t),t<0||this.size===1/0||this.size!==void 0&&t>this.size?e:this.find(function(r,n){return n===t},void 0,e)},has:function(t){return t=zt(this,t),t>=0&&(this.size!==void 0?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return D(this,Ti(this,t))},interleave:function(){var t=[this].concat(Et(arguments)),e=fr(this.toSeq(),L.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),D(this,r)},keySeq:function(){return P(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return D(this,mn(this,t,e,!1))},zip:function(){var t=[this].concat(Et(arguments));return D(this,fr(this,Ci,t))},zipWith:function(t){var e=Et(arguments);return e[0]=this,D(this,fr(this,t,e))}}),l.prototype[br]=!0,l.prototype[Lt]=!0,yt(v,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),v.prototype.has=j.includes,v.prototype.contains=v.prototype.includes,yt(ut,d.prototype),yt(L,l.prototype),yt(_t,v.prototype),yt(te,d.prototype),yt(Ct,l.prototype),yt(le,v.prototype);function Li(t,e){return e}function Ni(t,e){return[e,t]}function Ie(t){return function(){return!t.apply(this,arguments)}}function Cn(t){return function(){return-t.apply(this,arguments)}}function xn(t){return typeof t=="string"?JSON.stringify(t):String(t)}function Ci(){return Et(arguments)}function Un(t,e){return t<e?1:t>e?-1:0}function xi(t){if(t.size===1/0)return 0;var e=U(t),r=g(t),n=e?1:0,i=t.__iterate(r?e?function(o,u){n=31*n+Kn(Z(o),Z(u))|0}:function(o,u){n=n+Kn(Z(o),Z(u))|0}:e?function(o){n=31*n+Z(o)|0}:function(o){n=n+Z(o)|0});return Ui(i,n)}function Ui(t,e){return e=ee(e,3432918353),e=ee(e<<15|e>>>-15,461845907),e=ee(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=ee(e^e>>>16,2246822507),e=ee(e^e>>>13,3266489909),e=Ve(e^e>>>16),e}function Kn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var Ki={Iterable:c,Seq:K,Collection:Ot,Map:M,OrderedMap:N,List:T,Stack:x,Set:b,OrderedSet:vt,Record:tt,Range:P,Repeat:W,is:C,fromJS:Ke};return Ki})});var At=Pn(G=>{G.isString=function(a){return typeof a=="string"||Bn(a)==="[object String]"};G.isArray=Array.isArray||function(a){return Bn(a)==="[object Array]"};typeof/./!="function"&&typeof Int8Array!="object"?G.isFunction=function(a){return typeof a=="function"||!1}:G.isFunction=function(a){return toString.call(a)==="[object Function]"};G.isObject=function(a){var s=typeof a;return s==="function"||s==="object"&&!!a};G.extend=function(a){var s=arguments.length;if(!a||s<2)return a||{};for(var c=1;c<s;c++)for(var d=arguments[c],l=Object.keys(d),v=l.length,S=0;S<v;S++){var g=l[S];a[g]=d[g]}return a};G.clone=function(a){return G.isObject(a)?G.isArray(a)?a.slice():G.extend({},a):a};G.each=function(a,s,c){var d=a?a.length:0,l=-1,v,S;if(c&&(S=s,s=function(g,O,k){return S.call(c,g,O,k)}),$i(d))for(;++l<d&&s(a[l],l,a)!==!1;);else for(v=Object.keys(a),d=v.length;++l<d&&s(a[v[l]],v[l],a)!==!1;);return a};G.partial=function(a){var s=Array.prototype.slice,c=s.call(arguments,1);return function(){return a.apply(this,c.concat(s.call(arguments)))}};G.toFactory=function(a){var s=function(...c){return new a(...c)};return s.__proto__=a,s.prototype=a.prototype,s};function Bn(a){return a&&typeof a=="object"&&toString.call(a)}function $i(a){return typeof a=="number"&&a>-1&&a%1===0&&a<=Number.MAX_VALUE}});try{window.console&&console.log||(console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}})}catch{}var gr=J(St()),Me=J(At());var mr=J(St()),Wn=J(At());function ze(a){return mr.default.Iterable.isIterable(a)}function Sr(a){return ze(a)||!(0,Wn.isObject)(a)}function ae(a){return ze(a)?a.toJS():a}function Vt(a){return ze(a)?a:mr.default.fromJS(a)}var wr=class{constructor(s){this.__handlers=(0,gr.Map)({}),s&&(0,Me.extend)(this,s),this.initialize()}initialize(){}getInitialState(){return(0,gr.Map)()}handle(s,c,d){let l=this.__handlers.get(c);return typeof l=="function"?l.call(this,s,d,c):s}handleReset(s){return this.getInitialState()}on(s,c){this.__handlers=this.__handlers.set(s,c)}serialize(s){return ae(s)}deserialize(s){return Vt(s)}};var ji=(0,Me.toFactory)(wr);var Rr=J(St());var Ir=J(At());function Yi(a,s){let c={};return(0,Ir.each)(s,(d,l)=>{c[l]=a.evaluate(d)}),c}function Er(a){return{getInitialState(){return Yi(a,this.getDataBindings())},componentDidMount(){this.__unwatchFns=[],(0,Ir.each)(this.getDataBindings(),(s,c)=>{let d=a.observe(s,l=>{this.setState({[c]:l})});this.__unwatchFns.push(d)})},componentWillUnmount(){for(;this.__unwatchFns.length;)this.__unwatchFns.shift()()}}}var $t=J(St());var bt=J(St()),Jn=(0,bt.Record)({value:null,storeStates:(0,bt.Map)(),dispatchId:null}),Tt=class{constructor(s=(0,bt.Map)()){this.cache=s}lookup(s,c){return this.cache.get(s,c)}has(s){return this.cache.has(s)}asMap(){return this.cache}hit(s){return this}miss(s,c){return new Tt(this.cache.update(s,d=>{if(d&&d.dispatchId>c.dispatchId)throw new Error("Refusing to cache older value");return c}))}evict(s){return new Tt(this.cache.remove(s))}},Gi=1e3,Hi=1,wt=class{constructor(s=Gi,c=Hi,d=new Tt,l=(0,bt.OrderedSet)()){this.limit=s,this.evictCount=c,this.cache=d,this.lru=l}lookup(s,c){return this.cache.lookup(s,c)}has(s){return this.cache.has(s)}asMap(){return this.cache.asMap()}hit(s){return this.cache.has(s)?new wt(this.limit,this.evictCount,this.cache,this.lru.remove(s).add(s)):this}miss(s,c){var d;if(this.lru.size>=this.limit){if(this.has(s))return new wt(this.limit,this.evictCount,this.cache.miss(s,c),this.lru.remove(s).add(s));let l=this.lru.take(this.evictCount).reduce((v,S)=>v.evict(S),this.cache).miss(s,c);d=new wt(this.limit,this.evictCount,l,this.lru.skip(this.evictCount).add(s))}else d=new wt(this.limit,this.evictCount,this.cache.miss(s,c),this.lru.add(s));return d}evict(s){return this.cache.has(s)?new wt(this.limit,this.evictCount,this.cache.evict(s),this.lru.remove(s)):this}};function Oe(){return new Tt}var fe=J(St()),Ae=J(At());var qe=J(St()),De=J(At());function ht(a){return(0,De.isArray)(a)&&!(0,De.isFunction)(a[a.length-1])}function Vn(a,s){let c=qe.default.List(a),d=qe.default.List(s);return qe.default.is(c,d)}var Xi=a=>a;function Ft(a){return(0,Ae.isArray)(a)&&(0,Ae.isFunction)(a[a.length-1])}function $n(a){return a[a.length-1]}function zr(a){return a.slice(0,a.length-1)}function jn(a,s){s||(s=fe.default.Set());let c=fe.default.Set().withMutations(d=>{if(!Ft(a))throw new Error("getFlattenedDeps must be passed a Getter");zr(a).forEach(l=>{if(ht(l))d.add((0,fe.List)(l));else if(Ft(l))d.union(jn(l));else throw new Error("Invalid getter, each dependency must be a KeyPath or Getter")})});return s.union(c)}function Yn(a){if(!ht(a))throw new Error("Cannot create Getter from KeyPath: "+a);return[a,Xi]}function Mr(a){if(a.hasOwnProperty("__storeDeps"))return a.__storeDeps;let s=jn(a).map(c=>c.first()).filter(c=>!!c);return Object.defineProperty(a,"__storeDeps",{enumerable:!1,configurable:!1,writable:!1,value:s}),s}var Re=J(At()),Zi=$t.default.Record({result:null,reactorState:null});function Gn(a,s){return new Zi({result:a,reactorState:s})}function Xn(a,s){return a.withMutations(c=>{(0,Re.each)(s,(d,l)=>{c.getIn(["stores",l])&&console.warn("Store already defined for id = "+l);let v=d.getInitialState();if(v===void 0&&H(c,"throwOnUndefinedStoreReturnValue"))throw new Error("Store getInitialState() must return a value, did you forget a return statement");if(H(c,"throwOnNonImmutableStore")&&!Sr(v))throw new Error("Store getInitialState() must return an immutable value, did you forget to call toImmutable");c.update("stores",S=>S.set(l,d)).update("state",S=>S.set(l,v)).update("dirtyStores",S=>S.add(l)).update("storeStates",S=>Te(S,[l]))}),oi(c)})}function Zn(a,s){return a.withMutations(c=>{(0,Re.each)(s,(d,l)=>{c.update("stores",v=>v.set(l,d))})})}function Qn(a,s,c){if(s===void 0&&H(a,"throwOnUndefinedActionType"))throw new Error("`dispatch` cannot be called with an `undefined` action type.");let d=a.get("state"),l=a.get("dirtyStores"),v=d.withMutations(g=>{It(a,"dispatchStart")(a,s,c),a.get("stores").forEach((O,k)=>{let U=g.get(k),at;try{at=O.handle(U,s,c)}catch(rt){throw It(a,"dispatchError")(a,rt.message),rt}if(at===void 0&&H(a,"throwOnUndefinedStoreReturnValue")){let rt="Store handler must return a value, did you forget a return statement";throw It(a,"dispatchError")(a,rt),new Error(rt)}g.set(k,at),U!==at&&(l=l.add(k))}),It(a,"dispatchEnd")(a,g,l,d)}),S=a.set("state",v).set("dirtyStores",l).update("storeStates",g=>Te(g,l));return oi(S)}function ti(a,s){let c=[],d=Vt({}).withMutations(v=>{(0,Re.each)(s,(S,g)=>{let O=a.getIn(["stores",g]);if(O){let k=O.deserialize(S);k!==void 0&&(v.set(g,k),c.push(g))}})}),l=$t.default.Set(c);return a.update("state",v=>v.merge(d)).update("dirtyStores",v=>v.union(l)).update("storeStates",v=>Te(v,c))}function ei(a,s,c){let d=s;ht(s)&&(s=Yn(s));let l=a.get("nextId"),v=Mr(s),S=$t.default.Map({id:l,storeDeps:v,getterKey:d,getter:s,handler:c}),g;return v.size===0?g=a.update("any",O=>O.add(l)):g=a.withMutations(O=>{v.forEach(k=>{let U=["stores",k];O.hasIn(U)||O.setIn(U,$t.default.Set()),O.updateIn(["stores",k],at=>at.add(l))})}),g=g.set("nextId",l+1).setIn(["observersMap",l],S),{observerState:g,entry:S}}function H(a,s){let c=a.getIn(["options",s]);if(c===void 0)throw new Error("Invalid option: "+s);return c}function ri(a,s,c){let d=a.get("observersMap").filter(l=>{let v=l.get("getterKey");return!c||l.get("handler")===c?ht(s)&&ht(v)?Vn(s,v):s===v:!1});return a.withMutations(l=>{d.forEach(v=>Or(l,v))})}function Or(a,s){return a.withMutations(c=>{let d=s.get("id"),l=s.get("storeDeps");l.size===0?c.update("any",v=>v.remove(d)):l.forEach(v=>{c.updateIn(["stores",v],S=>S&&S.remove(d))}),c.removeIn(["observersMap",d])})}function ni(a){let s=a.get("state");return a.withMutations(c=>{let d=c.get("stores"),l=d.keySeq().toJS();d.forEach((v,S)=>{let g=s.get(S),O=v.handleReset(g);if(O===void 0&&H(c,"throwOnUndefinedStoreReturnValue"))throw new Error("Store handleReset() must return a value, did you forget a return statement");if(H(c,"throwOnNonImmutableStore")&&!Sr(O))throw new Error("Store reset state must be an immutable value, did you forget to call toImmutable");c.setIn(["state",S],O)}),c.update("storeStates",v=>Te(v,l)),qr(c)})}function ce(a,s){let c=a.get("state");if(ht(s))return Gn(c.getIn(s),a);if(!Ft(s))throw new Error("evaluate must be passed a keyPath or Getter");var l=a.get("cache").lookup(s);let v=!l||Qi(a,l);return v&&(l=to(a,s)),Gn(l.get("value"),a.update("cache",S=>v?S.miss(s,l):S.hit(s)))}function ii(a){let s={};return a.get("stores").forEach((c,d)=>{let l=a.getIn(["state",d]),v=c.serialize(l);v!==void 0&&(s[d]=v)}),s}function qr(a){return a.set("dirtyStores",$t.default.Set())}function It(a,s){let c=a.get("logger");if(!c)return Hn;let d=c[s];return d?d.bind(c):Hn}function Qi(a,s){let c=s.get("storeStates");return!c.size||c.some((d,l)=>a.getIn(["storeStates",l])!==d)}function to(a,s){let c=zr(s).map(S=>ce(a,S).result),d=$n(s).apply(null,c),l=Mr(s),v=Vt({}).withMutations(S=>{l.forEach(g=>{let O=a.getIn(["storeStates",g]);S.set(g,O)})});return Jn({value:d,storeStates:v,dispatchId:a.get("dispatchId")})}function oi(a){return a.update("dispatchId",s=>s+1)}function Te(a,s){return a.withMutations(c=>{s.forEach(d=>{let l=c.has(d)?c.get(d)+1:1;c.set(d,l)})})}function Hn(){}var ui={dispatchStart:function(a,s,c){H(a,"logDispatches")&&console.group&&(console.groupCollapsed("Dispatch: %s",s),console.group("payload"),console.debug(c),console.groupEnd())},dispatchError:function(a,s){H(a,"logDispatches")&&console.group&&(console.debug("Dispatch error: "+s),console.groupEnd())},dispatchEnd:function(a,s,c,d){H(a,"logDispatches")&&console.group&&(H(a,"logDirtyStores")&&console.log("Stores updated:",c.toList().toJS()),H(a,"logAppState")&&console.debug("Dispatch done, new state: ",s.toJS()),console.groupEnd())},notifyStart:function(a,s){},notifyEvaluateStart:function(a,s){},notifyEvaluateEnd:function(a,s,c,d){},notifyEnd:function(a,s){}};var fi=J(At());var X=J(St());var Dr=(0,X.Map)({logDispatches:!1,logAppState:!1,logDirtyStores:!1,throwOnUndefinedActionType:!1,throwOnUndefinedStoreReturnValue:!1,throwOnNonImmutableStore:!1,throwOnDispatchInDispatch:!1}),si=(0,X.Map)({logDispatches:!0,logAppState:!0,logDirtyStores:!0,throwOnUndefinedActionType:!0,throwOnUndefinedStoreReturnValue:!0,throwOnNonImmutableStore:!0,throwOnDispatchInDispatch:!0}),ai=(0,X.Record)({dispatchId:0,state:(0,X.Map)(),stores:(0,X.Map)(),cache:Oe(),logger:{},storeStates:(0,X.Map)(),dirtyStores:(0,X.Set)(),debug:!1,options:Dr}),Ar=(0,X.Record)({any:(0,X.Set)(),stores:(0,X.Map)({}),observersMap:(0,X.Map)({}),nextId:1});var Tr=class{constructor(s={}){let c=!!s.debug,d=c?si:Dr,l=s.logger?s.logger:{};!s.logger&&c&&(l=ui);let v=new ai({debug:c,cache:s.cache||Oe(),logger:l,options:d.merge(s.options||{})});this.prevReactorState=v,this.reactorState=v,this.observerState=new Ar,this.ReactMixin=Er(this),this.__batchDepth=0,this.__isDispatching=!1}evaluate(s){let{result:c,reactorState:d}=ce(this.reactorState,s);return this.reactorState=d,c}evaluateToJS(s){return ae(this.evaluate(s))}observe(s,c){arguments.length===1&&(c=s,s=[]);let{observerState:d,entry:l}=ei(this.observerState,s,c);return this.observerState=d,()=>{this.observerState=Or(this.observerState,l)}}unobserve(s,c){if(arguments.length===0)throw new Error("Must call unobserve with a Getter");if(!Ft(s)&&!ht(s))throw new Error("Must call unobserve with a Getter");this.observerState=ri(this.observerState,s,c)}dispatch(s,c){if(this.__batchDepth===0){if(H(this.reactorState,"throwOnDispatchInDispatch")&&this.__isDispatching)throw this.__isDispatching=!1,new Error("Dispatch may not be called while a dispatch is in progress");this.__isDispatching=!0}try{this.reactorState=Qn(this.reactorState,s,c)}catch(d){throw this.__isDispatching=!1,d}try{this.__notify()}finally{this.__isDispatching=!1}}batch(s){this.batchStart(),s(),this.batchEnd()}registerStore(s,c){console.warn("Deprecation warning: `registerStore` will no longer be supported in 1.1, use `registerStores` instead"),this.registerStores({[s]:c})}registerStores(s){this.reactorState=Xn(this.reactorState,s),this.__notify()}replaceStores(s){this.reactorState=Zn(this.reactorState,s)}serialize(){return ii(this.reactorState)}loadState(s){this.reactorState=ti(this.reactorState,s),this.__notify()}reset(){let s=ni(this.reactorState);this.reactorState=s,this.prevReactorState=s,this.observerState=new Ar}__notify(){if(this.__batchDepth>0)return;let s=this.reactorState.get("dirtyStores");if(s.size===0)return;It(this.reactorState,"notifyStart")(this.reactorState,this.observerState),Rr.default.Set().withMutations(l=>{l.union(this.observerState.get("any")),s.forEach(v=>{let S=this.observerState.getIn(["stores",v]);S&&l.union(S)})}).forEach(l=>{let v=this.observerState.getIn(["observersMap",l]);if(!v)return;let S=!1,g=v.get("getter"),O=v.get("handler");It(this.reactorState,"notifyEvaluateStart")(this.reactorState,g);let k=ce(this.prevReactorState,g),U=ce(this.reactorState,g);this.prevReactorState=k.reactorState,this.reactorState=U.reactorState;let at=k.result,rt=U.result;Rr.default.is(at,rt)||(O.call(null,rt),S=!0),It(this.reactorState,"notifyEvaluateEnd")(this.reactorState,g,S,rt)});let d=qr(this.reactorState);this.prevReactorState=d,this.reactorState=d,It(this.reactorState,"notifyEnd")(this.reactorState,this.observerState)}batchStart(){this.__batchDepth++}batchEnd(){if(this.__batchDepth--,this.__batchDepth<=0){this.__isDispatching=!0;try{this.__notify()}catch(s){throw this.__isDispatching=!1,s}this.__isDispatching=!1}}},ro=(0,fi.toFactory)(Tr);var no=J(St());var export_Immutable=no.default;export{export_Immutable as Immutable,wt as LRUCache,ro as Reactor,ji as Store,Er as createReactMixin,Ft as isGetter,ze as isImmutable,ht as isKeyPath,Vt as toImmutable,ae as toJS};
